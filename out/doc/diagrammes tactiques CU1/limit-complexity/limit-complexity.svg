<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="627px" preserveAspectRatio="none" style="width:484px;height:627px;background:#FFFFFF;" version="1.1" viewBox="0 0 484 627" width="484px" zoomAndPan="magnify"><defs/><g><rect fill="none" height="139.7578" style="stroke:#000000;stroke-width:1.5;" width="458.5" x="20" y="145.6641"/><rect fill="none" height="274.6484" style="stroke:#000000;stroke-width:1.5;" width="468.5" x="10" y="299.4219"/><rect fill="none" height="181.5938" style="stroke:#000000;stroke-width:1.5;" width="338.5" x="20" y="385.4766"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="90" x2="90" y1="37.6094" y2="591.0703"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="310.5" x2="310.5" y1="37.6094" y2="591.0703"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="427.5" x2="427.5" y1="37.6094" y2="591.0703"/><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="121" x="30" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="107" x="37" y="26.5332">HealthMonitorApi</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="121" x="30" y="590.0703"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="107" x="37" y="611.6035">HealthMonitorApi</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="76" x="272.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62" x="279.5" y="26.5332">Discovery</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="76" x="272.5" y="590.0703"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62" x="279.5" y="611.6035">Discovery</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="82" x="386.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="68" x="393.5" y="26.5332">ApiExterne</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="82" x="386.5" y="590.0703"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="68" x="393.5" y="611.6035">ApiExterne</text><polygon fill="#181818" points="298.5,65.9609,308.5,69.9609,298.5,73.9609,302.5,69.9609" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="90.5" x2="304.5" y1="69.9609" y2="69.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="111" x="97.5" y="65.1045">getListAllServices()</text><polygon fill="#181818" points="101.5,96.3125,91.5,100.3125,101.5,104.3125,97.5,100.3125" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="95.5" x2="309.5" y1="100.3125" y2="100.3125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="99" x="107.5" y="95.4561">return allServices</text><polygon fill="#181818" points="298.5,126.6641,308.5,130.6641,298.5,134.6641,302.5,130.6641" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="90.5" x2="304.5" y1="130.6641" y2="130.6641"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="64" x="97.5" y="125.8076">subscribe()</text><path d="M20,145.6641 L81,145.6641 L81,154.0156 L71,164.0156 L20,164.0156 L20,145.6641 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="139.7578" style="stroke:#000000;stroke-width:1.5;" width="458.5" x="20" y="145.6641"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="35" y="160.1592">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="164" x="96" y="159.083">[a new service register itself]</text><polygon fill="#181818" points="321.5,182.3672,311.5,186.3672,321.5,190.3672,317.5,186.3672" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="315.5" x2="426.5" y1="186.3672" y2="186.3672"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="93" x="327.5" y="181.5107">registerService()</text><polygon fill="#181818" points="101.5,212.7188,91.5,216.7188,101.5,220.7188,97.5,216.7188" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="95.5" x2="309.5" y1="216.7188" y2="216.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="123" x="107.5" y="211.8623">announceNewService</text><polygon fill="#181818" points="298.5,243.0703,308.5,247.0703,298.5,251.0703,302.5,247.0703" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="90.5" x2="304.5" y1="247.0703" y2="247.0703"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="111" x="97.5" y="242.2139">getListAllServices()</text><polygon fill="#181818" points="101.5,273.4219,91.5,277.4219,101.5,281.4219,97.5,277.4219" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="95.5" x2="309.5" y1="277.4219" y2="277.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="99" x="107.5" y="272.5654">return allServices</text><path d="M10,299.4219 L83,299.4219 L83,307.7734 L73,317.7734 L10,317.7734 L10,299.4219 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="274.6484" style="stroke:#000000;stroke-width:1.5;" width="468.5" x="10" y="299.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="25" y="313.917">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="273" x="98" y="312.8408">[number of registered services every 5 seconds]</text><polygon fill="#181818" points="415.5,336.125,425.5,340.125,415.5,344.125,419.5,340.125" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="90.5" x2="421.5" y1="340.125" y2="340.125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="74" x="97.5" y="335.2686">pingService()</text><polygon fill="#181818" points="101.5,366.4766,91.5,370.4766,101.5,374.4766,97.5,370.4766" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="95.5" x2="426.5" y1="370.4766" y2="370.4766"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="120" x="107.5" y="365.6201">response with status</text><path d="M20,385.4766 L81,385.4766 L81,393.8281 L71,403.8281 L20,403.8281 L20,385.4766 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="181.5938" style="stroke:#000000;stroke-width:1.5;" width="338.5" x="20" y="385.4766"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="35" y="399.9717">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="92" x="96" y="398.8955">[the api is down]</text><polygon fill="#181818" points="298.5,422.1797,308.5,426.1797,298.5,430.1797,302.5,426.1797" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="90.5" x2="304.5" y1="426.1797" y2="426.1797"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="196" x="97.5" y="421.3232">updateDiscoveryService("DOWN")</text><line style="stroke:#181818;stroke-width:1.0;" x1="90.5" x2="132.5" y1="456.5313" y2="456.5313"/><line style="stroke:#181818;stroke-width:1.0;" x1="132.5" x2="132.5" y1="456.5313" y2="469.5313"/><line style="stroke:#181818;stroke-width:1.0;" x1="91.5" x2="132.5" y1="469.5313" y2="469.5313"/><polygon fill="#181818" points="101.5,465.5313,91.5,469.5313,101.5,473.5313,97.5,469.5313" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117" x="97.5" y="451.6748">updateListServices()</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="20" x2="358.5" y1="478.5313" y2="478.5313"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="111" x="25" y="489.9502">[the api is newly up]</text><polygon fill="#181818" points="298.5,511.7188,308.5,515.7188,298.5,519.7188,302.5,515.7188" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="90.5" x2="304.5" y1="515.7188" y2="515.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="173" x="97.5" y="510.8623">updateDiscoveryService("UP")</text><line style="stroke:#181818;stroke-width:1.0;" x1="90.5" x2="132.5" y1="546.0703" y2="546.0703"/><line style="stroke:#181818;stroke-width:1.0;" x1="132.5" x2="132.5" y1="546.0703" y2="559.0703"/><line style="stroke:#181818;stroke-width:1.0;" x1="91.5" x2="132.5" y1="559.0703" y2="559.0703"/><polygon fill="#181818" points="101.5,555.0703,91.5,559.0703,101.5,563.0703,97.5,559.0703" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117" x="97.5" y="541.2139">updateListServices()</text><!--MD5=[c516c7abc095f5b90adee7a3c14c1c2f]
@startuml
participant HealthMonitorApi as hm
participant Discovery as d
participant ApiExterne as ae
hm -> d : getListAllServices() 
hm <- - d : return allServices 
hm -> d : subscribe() 
alt a new service register itself
    ae -> d : registerService() 
    d -> hm : announceNewService
    hm -> d : getListAllServices()
    hm <- - d : return allServices 
end
loop number of registered services every 5 seconds
    hm -> ae: pingService()
        ae - -> hm : response with status
    alt the api is down
        hm -> d : updateDiscoveryService("DOWN")
        hm -> hm : updateListServices()
    else the api is newly up
        hm -> d : updateDiscoveryService("UP")
        hm -> hm : updateListServices()
    end
end
@enduml

PlantUML version 1.2022.7(Mon Aug 22 13:01:30 EDT 2022)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) Client VM
Default Encoding: Cp1252
Language: en
Country: CA
--></g></svg>