<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="505px" preserveAspectRatio="none" style="width:977px;height:505px;background:#FFFFFF;" version="1.1" viewBox="0 0 977 505" width="977px" zoomAndPan="magnify"><defs/><g><rect fill="none" height="202.4609" style="stroke:#000000;stroke-width:1.5;" width="960.5" x="10" y="203.6641"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="41" x2="41" y1="82.6094" y2="423.125"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="341" x2="341" y1="82.6094" y2="423.125"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="565" x2="565" y1="82.6094" y2="423.125"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="877.5" x2="877.5" y1="82.6094" y2="423.125"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="36" x="20" y="79.5332">Client</text><ellipse cx="41" cy="13.5" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M41,21.5 L41,48.5 M28,29.5 L54,29.5 M41,48.5 L28,63.5 M41,48.5 L54,63.5 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="36" x="20" y="436.6582">Client</text><ellipse cx="41" cy="448.2344" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M41,456.2344 L41,483.2344 M28,464.2344 L54,464.2344 M41,483.2344 L28,498.2344 M41,483.2344 L54,498.2344 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="122" x="280" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="108" x="287" y="71.5332">HealthMonitorAPI</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="122" x="280" y="422.125"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="108" x="287" y="443.6582">HealthMonitorAPI</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="74" x="528" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="60" x="535" y="71.5332">IpHandler</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="74" x="528" y="422.125"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="60" x="535" y="443.6582">IpHandler</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="165" x="795.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="151" x="802.5" y="71.5332">ServiceRemovalHandler</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="165" x="795.5" y="422.125"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="151" x="802.5" y="443.6582">ServiceRemovalHandler</text><polygon fill="#181818" points="329,110.9609,339,114.9609,329,118.9609,333,114.9609" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="41" x2="335" y1="114.9609" y2="114.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="276" x="48" y="110.1045">checkHealth(senderIp:string, requestedIp:string)</text><polygon fill="#181818" points="553,141.3125,563,145.3125,553,149.3125,557,145.3125" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="341" x2="559" y1="145.3125" y2="145.3125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="200" x="348" y="140.4561">denyServiceCheck(senderIp:string)</text><line style="stroke:#181818;stroke-width:1.0;" x1="565" x2="607" y1="175.6641" y2="175.6641"/><line style="stroke:#181818;stroke-width:1.0;" x1="607" x2="607" y1="175.6641" y2="188.6641"/><line style="stroke:#181818;stroke-width:1.0;" x1="566" x2="607" y1="188.6641" y2="188.6641"/><polygon fill="#181818" points="576,184.6641,566,188.6641,576,192.6641,572,188.6641" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="299" x="572" y="170.8076">addRequestCount(senderIp:string, requestCount:int)</text><path d="M10,203.6641 L71,203.6641 L71,212.0156 L61,222.0156 L10,222.0156 L10,203.6641 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="202.4609" style="stroke:#000000;stroke-width:1.5;" width="960.5" x="10" y="203.6641"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="25" y="218.1592">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="103" x="86" y="217.083">[requestCount &gt; 5]</text><polygon fill="#181818" points="866,240.3672,876,244.3672,866,248.3672,870,244.3672" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="565" x2="872" y1="244.3672" y2="244.3672"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="172" x="572" y="239.5107">blockRequest(senderIp:string)</text><polygon fill="#181818" points="576,270.7188,566,274.7188,576,278.7188,572,274.7188" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="570" x2="877" y1="274.7188" y2="274.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="85" x="582" y="269.8623">deny message</text><polygon fill="#181818" points="352,301.0703,342,305.0703,352,309.0703,348,305.0703" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="346" x2="564" y1="305.0703" y2="305.0703"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="85" x="358" y="300.2139">deny message</text><polygon fill="#181818" points="52,331.4219,42,335.4219,52,339.4219,48,335.4219" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="46" x2="340" y1="335.4219" y2="335.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="85" x="58" y="330.5654">deny message</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="10" x2="970.5" y1="344.4219" y2="344.4219"/><polygon fill="#181818" points="352,363.7734,342,367.7734,352,371.7734,348,367.7734" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="346" x2="564" y1="367.7734" y2="367.7734"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="180" x="358" y="362.917">acceptRequest(senderIp:string)</text><polygon fill="#181818" points="52,394.125,42,398.125,52,402.125,48,398.125" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="46" x2="340" y1="398.125" y2="398.125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="96" x="58" y="393.2686">api health status</text><!--MD5=[ec6ad5e0c848482b9e41ea6fb9644c5a]
@startuml
actor Client as Client
participant HealthMonitorAPI as Health
participant IpHandler as IP
participant ServiceRemovalHandler as SRH

Client -> Health: checkHealth(senderIp:string, requestedIp:string)
Health -> IP: denyServiceCheck(senderIp:string)
IP -> IP: addRequestCount(senderIp:string, requestCount:int)

alt requestCount > 5
    IP -> SRH: blockRequest(senderIp:string)
    SRH - -> IP: deny message
    IP - -> Health: deny message 
    Health - -> Client: deny message
else
    IP -> Health: acceptRequest(senderIp:string)
    Health - -> Client: api health status
end
@enduml

PlantUML version 1.2022.7(Mon Aug 22 13:01:30 EDT 2022)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) Client VM
Default Encoding: Cp1252
Language: en
Country: CA
--></g></svg>